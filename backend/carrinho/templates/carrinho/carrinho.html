{% extends "base.html" %}
{% load static %}

{% block title %} Veganos Naturais {% endblock title %}

{% block content %}
        {% include "partials/messages.html" %}
        <section>
            <div class="main__carrinho-container">
            <div class="carrinho-container-icons">
                <div class="icons">
                    <a href="" style="color: #569641;">
                        <i class="bi bi-cart-fill"></i>
                        <span>Carrinho</span>
                    </a>
                </div>
                <div class="icons">
                    <a href="">
                        <i class="bi bi-person-fill"></i>
                        <span>Identificação</span>
                    </a>
                </div>
                <div class="icons">
                    <a href="">
                        <i class="bi bi-credit-card-2-back-fill"></i>
                        <span>Pagamento</span>
                    </a>
                </div>
            </div>
            <div class="titulo__carrinho">
                <h1>Carrinho</h1>
            </div>
            <hr width="600" style="margin: 0 auto;">

                <table class="carrinho__adicionado">
                    <tbody class="tbody">
                        {% for item in carrinho.itens.all %}
                    <tr class="produto-adicionado">
                        <td class="carrinho__conteudo-img">
                            {% if item.produto.imagem %}
                            <img src="{{item.produto.imagem.url}}" alt="">
                            {% endif %}
                            <span class="produto-title">{{item.produto.nome}}</span>
                        </td>
                        <td>
                            <span class="produto-preco">{{item.produto.preco}}</span>
                        </td>
                        <td class="remover__quantidade">
                            <form id="remover_atualizar_form_{{item.id}}" method="POST">{% csrf_token %}
                            <input class="input__quantidade" type="number" value="{{item.quantidade}}" min="1" max="{{item.produto.estoque}}">
                                <input type="hidden" value="{{item.produto.id}}" name="produto_id" >
                            </form>
                            <button form="remover_atualizar_form_{{item.id}}" formaction="{% url 'carrinho:remover_produto' %}" type="submit" class="button-remov">Remover</button>
                        </td>
                    </tr>
                        {% endfor %}
                    </tbody>
                </table>

            <hr width="600" style="margin: 0 auto;">
            <table class="informações__do__produto">
            <tr>
                    <td class="inf-produto">
                       <p>Outras opções de <strong>Entrega</strong> na proxima etapa</p>
                       <p><strong>Frete para o CEP</strong></p>
                       <input type="text" name="" id="" placeholder="00000-000">
                    </td>
                    <td colspan="3" class="total__geral">
                       <p>Frete Total: </p>
                        <div class="total">
                            <strong>Total: </strong>
                            <span>{{carrinho.total}}</span>
                        </div>
                        <div class="button_total">
                            <a href="">Continuar</a>
                        </div>
                    </td>
            </tr>
            </table>
        </section>

{% endblock content %}